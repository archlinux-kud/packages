diff --git a/PKGBUILD b/PKGBUILD
index 147339e..f453186 100644
--- a/PKGBUILD
+++ b/PKGBUILD
@@ -3,15 +3,16 @@
 _srcname=SPIRV-LLVM-Translator
 pkgname=spirv-llvm-translator-minimal-git
 pkgdesc="Tool and a library for bi-directional translation between SPIR-V and LLVM IR, trunk version"
-epoch=1
-pkgver=r1929.8e6f467
+pkgver=19.0.0.r1960.g8c357de0
 pkgrel=1
 arch=('x86_64')
 url="https://github.com/KhronosGroup/SPIRV-LLVM-Translator"
-license=('custom:Apache 2.0 with LLVM Exception')
-makedepends=(llvm-minimal-git git cmake spirv-headers-git spirv-tools-git)
-checkdepends=(python python-setuptools clang-minimal-git)
-depends=(llvm-libs-minimal-git spirv-tools-git gcc-libs glibc)
+license=('Apache-2.0 WITH LLVM-exception')
+groups=('mesa-minimal')
+# edit makedepends array so we build with our llvm-git
+makedepends=(llvm-git git cmake spirv-headers-git spirv-tools-git)
+checkdepends=(python python-setuptools)
+depends=(spirv-tools-git gcc-libs glibc)
 provides=(spirv-llvm-translator)
 conflicts=(spirv-llvm-translator)
 source=("git+$url.git"
@@ -20,9 +21,20 @@ md5sums=('SKIP')
 sha512sums=('SKIP')
 
 
+prepare() {
+    local ver1 ver2
+    ver1=$(grep -o 'BASE_LLVM_VERSION [^)]*' SPIRV-LLVM-Translator/CMakeLists.txt | cut -d' ' -f2)
+    ver2=$(pacman -Si llvm-minimal-git | grep Version | cut -d: -f2 | cut -d. -f-3 | sed 's/[[:space:]]//')
+
+    [[ ${ver1} == ${ver2} ]] || sed "s|${ver1}|${ver2}|" -i SPIRV-LLVM-Translator/CMakeLists.txt
+}
+
 pkgver() {
     cd $_srcname
-    printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short=7 HEAD)"
+    printf "%s.r%s.g%s" \
+        "$(grep -o 'BASE_LLVM_VERSION [^ \)]*' CMakeLists.txt | cut -d' ' -f2)" \
+        "$(git rev-list --count HEAD)" \
+        "$(git rev-parse --short HEAD)"
 }
 
 build() {
@@ -31,13 +43,19 @@ build() {
         -B _build \
         -S "$srcdir"/$_srcname  \
         -G "Unix Makefiles" \
+        -D CMAKE_AR=/usr/bin/llvm-ar \
         -D CMAKE_BUILD_TYPE=Release \
+        -D CMAKE_C_COMPILER=clang \
+        -D CMAKE_CXX_COMPILER=clang++ \
         -D CMAKE_INSTALL_PREFIX=/usr \
         -D CMAKE_POSITION_INDEPENDENT_CODE=ON \
+        -D CMAKE_RANLIB=/usr/bin/llvm-ranlib \
         -D CMAKE_SKIP_RPATH=ON \
+        -D LLVM_ENABLE_LTO=Thin \
         -D LLVM_EXTERNAL_LIT=/usr/bin/lit \
         -D LLVM_EXTERNAL_SPIRV_HEADERS_SOURCE_DIR=/usr/include/spirv/ \
         -D LLVM_SPIRV_INCLUDE_TESTS=ON \
+        -D LLVM_USE_LINKER=lld \
         -D BUILD_SHARED_LIBS=ON \
         -Wno-dev
 
@@ -49,6 +67,8 @@ check() {
 }
 
 package() {
+    # move llvm-libs-minimal-git dependency here
+    depends+=('llvm-libs-minimal-git')
 
     make -C _build DESTDIR="${pkgdir}" install
     install -Dm755 _build/tools/llvm-spirv/llvm-spirv -t "$pkgdir"/usr/bin
