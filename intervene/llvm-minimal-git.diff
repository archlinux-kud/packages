diff --git a/PKGBUILD b/PKGBUILD
index eee4aa0..62316e6 100644
--- a/PKGBUILD
+++ b/PKGBUILD
@@ -17,14 +17,18 @@
 
 pkgbase=llvm-minimal-git
 pkgname=(llvm-minimal-git llvm-libs-minimal-git clang-minimal-git clang-libs-minimal-git)
-pkgver=18.0.0_r479739.cd6022916bff
+pkgver=18.0.0.r483052.g2a951d78df63
 pkgrel=1
 arch=('x86_64')
 url="https://llvm.org/"
 license=('custom:Apache 2.0 with LLVM Exception')
+groups=('mesa-minimal')
 makedepends=(git cmake libffi libedit ncurses libxml2
              libxcrypt python python-setuptools)
-source=("git+https://github.com/llvm/llvm-project.git"
+# Build with LLVM instead of GCC, using llvm-git (expected of same version)
+makedepends+=('llvm-git')
+# pin commit that passes Debian/Ubuntu expensive CI checks - Thu, 7 Dec 2023 13:24:05 +0800
+source=("llvm-project::git+https://github.com/llvm/llvm-project.git#commit=2a951d78df633f2100a91b556f675efb4fec568b"
                 'local://llvm-config.h'
 )
                 
@@ -97,7 +101,7 @@ pkgver() {
             'BEGIN { ORS="." ; i=0 } \
              /set\(LLVM_VERSION_/ { print $2 ; i++ ; if (i==2) ORS="" } \
              END { print "\n" }' \
-             CMakeLists.txt)_r$(git rev-list --count HEAD).$(git rev-parse --short HEAD)
+             CMakeLists.txt).r$(git rev-list --count HEAD).g$(git rev-parse --short HEAD)
     echo "${_pkgver}"
 }
 
@@ -105,9 +109,15 @@ build() {
     
     local cmake_args=(
         -G "Unix Makefiles"
+        -D CMAKE_AR=/usr/bin/llvm-ar
         -D CMAKE_BUILD_TYPE=Release
+        -D CMAKE_C_COMPILER=clang
+        -D CMAKE_CXX_COMPILER=clang++
         -D CMAKE_INSTALL_PREFIX=/usr
+        -D CMAKE_RANLIB=/usr/bin/llvm-ranlib
         -D LLVM_BINUTILS_INCDIR=/usr/include
+        -D LLVM_ENABLE_LTO=Thin
+        -D LLVM_USE_LINKER=lld
         -D FFI_INCLUDE_DIR=$(pkg-config --variable=includedir libffi)
         -D LLVM_VERSION_SUFFIX=""
         -D LLVM_APPEND_VC_REV=ON
